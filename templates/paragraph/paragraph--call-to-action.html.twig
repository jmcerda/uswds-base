{%
  set section_classes = [
  'usa-section',
  'call-to-action',
  paragraph.field_background_style.value=='light' ? 'usa-section--light':'usa-section--dark',
  paragraph.field_edge_to_edge.value ? 'full-width-container'
]
%}
{% block paragraph %}
  <div{{ attributes }}>
    {%
      set background_style = paragraph.field_background_color.0.value.color ? "background-color:" ~ paragraph.field_background_color.0.value.color : ""
    %}
    {% set img_background = '' %}
    {% set content_background = '' %}
    {% if paragraph.field_image.entity.field_media_image.entity.fileuri %}
      {% set background_style = background_style ~ " background-image: url('" ~ file_url(paragraph.field_image.entity.field_media_image.entity.fileuri) ~ "');"%}
      {% set img_background = 'img-background' %}
      {% set content_background = 'content-background' %}
    {% endif %}

    {% block content %}

      <section class="{{ section_classes | join(' ') }} {{ img_background }}" style="{{ background_style }};">
        <div class="grid-container">
          <div class="cta-content {{ content_background }}">
            <h2 class="font-heading-xl">{{ content.field_uswds_title }}</h2>
            <div class="usa-intro">{{ content.field_uswds_body }}</div>
            {% if paragraph.field_uswds_button.value %}
              {%
                set button_classes = [
                'usa-button',
                paragraph.field_uswds_button_style.value,
              ]
              %}
              <div class="margin-top-2"><a class="{{ button_classes | join(' ') }}" href="{{ path(paragraph.field_uswds_button.0.uri) }}">{{ paragraph.field_uswds_button.0.value.title }}</a></div>
            {% endif %}
          </div>
        </div>
      </section>

    {% endblock %}
  </div>
{% endblock paragraph %}
